# Сервис сбора метрик и алертинга

## Стуктура проекта
Проект разделен на два сервиса:
- Агент: это сервис, который собирает метрики с определенным интервалом и отправляет их на сервер.
- Сервер: этот сервис сохраняет метрики в хранилище.

## Какие собираются метрики 
Агент собирает runtime метрики, которые доступны в пакете **runtime**, а также даные по загрузке процессора и оперативной памяти.

## Конфигурация
Настройка конфигурации происходит через переменные окруженис ОС или через аргументы командной строки.\
Для просмотра переменных окружения используйте параметр -h.\
Для обработки аргументов командной строки используется пакет **flag**.

## Агент
Агент использует две службы:
- Обновление значения метрик с определенным из кофигурации интервалом.
- Отправка метрик на сервер с интервалом, заданным в конфигурации.
Каждая служба запускается в отдельной горутине. Для разграничения доступа в данным метрик из каждой службы, использует *RWMutex*.

## Сервер
Сервер принимает запросы на обновление метрик и отвечает на запросы значений по метрикам.\
Работа с хранилищем данных основана на интерфейсе *Repository*.\
В качестве хранилища используются:
- In memory
- Файл
- СУБД PostgreSQL
Тип используемого хранилища задается через конфигурацию при запуске.\
Для обработки HTTP-запросов используется роутер *chi*.

## Unit-тесты
Для тестирования используется пакет
```
github.com/stretchr/testify
```
